jQuery(document).ready(function(e){function n(n,r,i){var s=i.find(".job_filters"),o=i.find(".showing_jobs"),u=i.find(".job_listings");t&&t.abort();if(r)e(".load_more_jobs",i).addClass("loading");else{e(u).addClass("loading");e("li.job_listing",u).css("visibility","hidden")}var a=new Array;e('input[name="filter_job_type[]"]:checked',s).each(function(){a.push(e(this).val())});var f=s.find("select[name^=search_categories], input[name^=search_categories]").map(function(){return e(this).val()}).get(),l={action:"job_manager_get_listings",search_keywords:s.find("input[name=search_keywords]").val(),search_location:s.find("input[name=search_location]").val(),search_categories:f,filter_job_type:a,per_page:s.find("input[name=per_page]").val(),orderby:s.find("input[name=orderby]").val(),order:s.find("input[name=order]").val(),page:n};t=e.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url,data:l,success:function(t){if(t)try{t.indexOf("<!--WPJM-->")>=0&&(t=t.split("<!--WPJM-->")[1]);t.indexOf("<!--WPJM_END-->")>=0&&(t=t.split("<!--WPJM_END-->")[0]);var s=e.parseJSON(t);s.showing?e(o).show().find("span").html(s.showing):e(o).hide();s.rss?e(o).find(".rss_link").attr("href",s.rss).show():e(o).find(".rss_link").hide();s.html&&(r?e(u).append(s.html):e(u).html(s.html));!s.found_jobs||s.max_num_pages==n?e(".load_more_jobs",i).hide():e(".load_more_jobs",i).show().data("page",n);e(u).removeClass("loading");e(".load_more_jobs",i).removeClass("loading");e("li.job_listing",u).css("visibility","visible")}catch(a){console.log(a)}}})}var t;e("#search_keywords, #search_location, .job_types input, #search_categories").change(function(){var t=e(this).closest("div.job_listings");n(1,!1,t)}).change();e(".showing_jobs .reset").click(function(){var t=e(this).closest("div.job_listings"),r=e(this).closest("form");r.find("input[name=search_keywords]").val("");r.find("input[name=search_location]").val("");r.find("select[name^=search_categories]").val("");e('input[name="filter_job_type[]"]',r).attr("checked","checked");n(1,!1,t);return!1});e(".load_more_jobs").click(function(){var t=e(this).closest("div.job_listings");page=e(this).data("page");page?page=parseInt(page):page=1;e(this).data("page",page+1);n(page+1,!0,t);return!1})});